(this["webpackJsonpodin-battleship"]=this["webpackJsonpodin-battleship"]||[]).push([[0],{14:function(e,t,r){},15:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r(1),i=r(6),h=r.n(i),c=r(4),o=function(){return Object(a.jsxs)("header",{className:"header",children:[Object(a.jsx)("div",{className:"header__title",children:"BattleShip"}),Object(a.jsx)("a",{href:"http://mooresa.github.io",className:"header__link",children:"Home"})]})},l=r(2),s=r(3),u=function(){function e(t){Object(l.a)(this,e),this.length=t,this.hits=new Array(t).fill(!1)}return Object(s.a)(e,[{key:"hit",value:function(e){return!(e>this.hits.length)&&(this.hits[e]=!0,!0)}},{key:"isSunk",value:function(){return this.hits.every((function(e){return e}))}}]),e}(),d=function(){function e(){Object(l.a)(this,e),this.attacked=!1,this.ship=null,this.shipPos=null}return Object(s.a)(e,[{key:"recieveShip",value:function(e,t){return!this.ship&&(this.ship=e,this.shipPos=t,!0)}},{key:"receiveAttack",value:function(){return!this.attacked&&(this.attacked=!0,this.ship&&this.ship.hit(this.shipPos),!0)}}]),e}(),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;Object(l.a)(this,e),this.grid=[];for(var r=0;r<t;r+=1){this.grid.push([]);for(var a=0;a<t;a+=1)this.grid[r].push(new d)}}return Object(s.a)(e,[{key:"validatePlacement",value:function(e,t,r,a){return!1!==this.checkBounds(e,t,r,a)&&!1!==this.checkDuplicate(e,t,r,a)}},{key:"checkDuplicate",value:function(e,t,r,a){for(var n=0;n<r;n+=1)if(a){if(this.grid[t+n][e].ship)return!1}else if(this.grid[t][e+n].ship)return!1;return!0}},{key:"checkBounds",value:function(e,t,r,a){if(a){if(t+r>this.grid.length)return!1}else if(e+r>this.grid.length)return!1;return!0}},{key:"placeShip",value:function(e,t,r,a){if(!this.validatePlacement(e,t,r,a))return!1;for(var n=new u(r),i=0;i<r;i+=1)a?this.grid[t+i][e].recieveShip(n,i):this.grid[t][e+i].recieveShip(n,i);return!0}},{key:"receiveAttack",value:function(e,t){return!(e>this.grid.length||t>this.grid.length)&&this.grid[t][e].receiveAttack()}},{key:"generateShipGrid",value:function(){return{x:Math.floor(Math.random()*this.grid.length),y:Math.floor(Math.random()*this.grid.length)}}},{key:"allSunk",value:function(){for(var e=0;e<this.grid.length;e+=1)for(var t=0;t<this.grid[e].length;t+=1){var r=this.grid[e][t].ship;if(r&&!r.isSunk())return!1}return!0}},{key:"allShot",value:function(){for(var e=0;e<this.grid.length;e+=1)for(var t=0;t<this.grid.length;t+=1)if(!this.grid[e][t].attacked)return!1;return!0}}]),e}(),p=function(){function e(t){Object(l.a)(this,e),this.playerBoard=new f(t)}return Object(s.a)(e,[{key:"placeShip",value:function(e,t,r,a){return this.playerBoard.placeShip(e,t,r,a)}},{key:"recieveAttack",value:function(e,t){return this.playerBoard.receiveAttack(e,t)}}],[{key:"chooseAttack",value:function(e){for(var t=e.playerBoard.grid.length,r=Math.floor(Math.random()*t),a=Math.floor(Math.random()*t),n=1;e.playerBoard.grid[a][r].attacked;)if(n+=1,r=Math.floor(Math.random()*t),a=Math.floor(Math.random()*t),n>=30)return{x:r,y:a};return{x:r,y:a}}}]),e}(),m=r(8),v=r(7),g=function(e){Object(m.a)(r,e);var t=Object(v.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"findPlacement",value:function(e){for(var t=Math.floor(Math.random()*this.playerBoard.grid.length),r=Math.floor(Math.random()*this.playerBoard.grid.length),a=Math.random()<.5;!this.placeShip(r,t,e,a);)t=Math.floor(Math.random()*this.playerBoard.grid.length),r=Math.floor(Math.random()*this.playerBoard.grid.length),a=Math.random()<.5}},{key:"populateBoard",value:function(){for(var e=[5,4,3,3,2,2],t=0;t<e.length;t+=1)this.findPlacement(e[t])}}],[{key:"selectTarget",value:function(e){if(e.playerBoard.allShot())return!1;for(var t=e.playerBoard.grid,r=Math.floor(Math.random()*t.length);!this.checkRow(t,r);)r=Math.floor(Math.random()*t.length);for(var a=Math.floor(Math.random()*t.length);t[r][a].attacked;)a=Math.floor(Math.random()*t.length);return{x:a,y:r}}},{key:"checkRow",value:function(e,t){for(var r=0;r<e.length;r+=1)if(!e[t][r].attacked)return!0;return!1}}]),r}(p),j=function(){function e(t){if(Object(l.a)(this,e),t)return this.humanPlayer=t.humanPlayer,this.computerPlayer=t.computerPlayer,void(this.winner=t.winner);this.humanPlayer=new p,this.computerPlayer=new g,this.winner=null}return Object(s.a)(e,[{key:"gameStart",value:function(){return this.computerPlayer.populateBoard(),{game:new e(this)}}},{key:"humanPlace",value:function(t,r,a,n){return this.humanPlayer.placeShip(t,r,a,n)?{error:!1,game:new e(this)}:{error:!0,game:this}}},{key:"humanAttack",value:function(t,r){return this.computerPlayer.recieveAttack(t,r)?this.computerPlayer.playerBoard.allSunk()?(this.winner="Human",{error:!1,game:new e(this)}):(this.computerAttack(),this.humanPlayer.playerBoard.allSunk()?(this.winner="Computer",{error:!1,game:new e(this)}):{error:!1,game:new e(this)}):{error:!0,game:this}}},{key:"computerAttack",value:function(){var t=g.selectTarget(this.humanPlayer),r=t.x,a=t.y;return this.humanPlayer.recieveAttack(r,a)?{error:!1,game:new e(this)}:{error:!0,game:this}}}]),e}(),y=function(e){var t=e.handleEvent,r=e.gridInfo,n=e.colIndex,i=e.rowIndex,h=e.playerFlag,c="board__cell";return r.ship&&r.attacked?c+=" board__cell--hit":(r.attacked&&(c+=" board__cell--miss"),r.ship&&h&&(c+=" board__cell--ship")),Object(a.jsx)("div",{className:c,"aria-label":"Board Cell","data-x":n,"data-y":i,onClick:t,role:"button",tabIndex:"0"},Math.random())},b=function(e){var t=e.handleEvent,r=e.rowInfo,n=e.rowIndex,i=e.playerFlag;return Object(a.jsx)("div",{className:"board__row",children:r.map((function(e,r){return Object(a.jsx)(y,{playerFlag:i,handleEvent:t,gridInfo:e,rowIndex:n,colIndex:r},Math.random())}))})},k=function(e){var t=e.player,r=e.playerAttack,n=e.placeShip,i=!1;n&&(i=!0);var h=function(e){if(n){var t=e.target.dataset,a=t.x,i=t.y;n(a,i)}else if(r){var h=e.target.dataset,c=h.x,o=h.y;r(c,o)}};return n&&(i=!0),Object(a.jsxs)("div",{className:"player-area",children:[Object(a.jsx)("div",{className:"player-area__header",children:"Player"}),Object(a.jsx)("div",{className:"board",children:t.playerBoard.grid.map((function(e,t){return Object(a.jsx)(b,{handleEvent:h,playerFlag:i,rowInfo:e,rowIndex:t},Math.random())}))})]})},O=function(e){var t,r=e.nextShip,n=e.orientation,i=e.swapOrientation;return void 0===r?Object(a.jsx)("div",{}):(t=n?"Orientation: Verticle":"Orientation: Horizontal",Object(a.jsxs)("div",{className:"next-ship",children:[Object(a.jsx)("div",{className:"next-ship__header",children:"Place Your Ship!"}),Object(a.jsx)("div",{className:"next-ship__length",children:"Ship Length: ".concat(r)}),Object(a.jsx)("div",{className:"next-ship__orientation",children:t}),Object(a.jsx)("button",{className:"next-ship__swap-btn",type:"button",onClick:i,children:"Swap Orientation"})]}))},x=function(e){var t=e.winner,r=e.resetGame;return t?Object(a.jsx)("div",{className:"win-modal",children:Object(a.jsxs)("div",{className:"win-modal__content",children:[Object(a.jsx)("div",{className:"win-modal__winner",children:"Winner: ".concat(t)}),Object(a.jsx)("button",{type:"button",className:"win-modal__resetbtn",onClick:r,children:"Play Again"})]})}):null},w=function(){return Object(a.jsx)("footer",{className:"footer",children:"Copyright \xa9 2020 Seamus Moore"})};var M=function(){var e=Object(n.useState)(new j),t=Object(c.a)(e,2),r=t[0],i=t[1],h=Object(n.useState)([5,4,3,3,2,2]),l=Object(c.a)(h,2),s=l[0],u=l[1],d=Object(n.useState)(!0),f=Object(c.a)(d,2),p=f[0],m=f[1];return Object(n.useEffect)((function(){i((function(e){return e.gameStart().game}))}),[]),Object(a.jsxs)("div",{className:"page",children:[Object(a.jsx)(o,{}),Object(a.jsx)(x,{winner:r.winner,resetGame:function(e){e.preventDefault(),i((function(){var e=new j,t=e.gameStart();return e=t.game})),u([5,4,3,3,2,2])}}),Object(a.jsx)(O,{nextShip:s[0],orientation:p,swapOrientation:function(){m(!p)}}),Object(a.jsxs)("div",{className:"game-area",children:[Object(a.jsx)(k,{player:r.humanPlayer,placeShip:function(e,t){var a=parseInt(e,10),n=parseInt(t,10),h=s[0];i((function(){var e=r.humanPlace(a,n,h,p),t=e.error,i=e.game;return t?r:(u((function(){return s.shift(),s})),i)}))}}),Object(a.jsx)(k,{player:r.computerPlayer,playerAttack:function(e,t){0===s.length&&(r.winner||i((function(){var a=r.humanAttack(e,t),n=a.error,i=a.game;return n?r:i})))}})]}),Object(a.jsx)(w,{})]})};r(14);h.a.render(Object(a.jsx)(M,{}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.b2b657ee.chunk.js.map